<!doctype html>

<html lang="en">

<head>
    <script src="https://kit.fontawesome.com/2c9f15701e.js" crossorigin="anonymous"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./app.css">
    <link rel="stylesheet" id="theme" href="./themes/default.css">
</head>

<body>
    <div class="container">
        <div class="content">
            <div class="header">
                <div class="logo">
                    <div id="icon_with_text">
                        <img class="icon" src="svg_icon.svg">
                        </img>
                        <div class="text"><span>
                                Typing Test
                            </span>
                        </div>
                    </div>
                    <div class="menu">
                        <div class="kb_button">
                            <i class="fa-solid fa-keyboard"></i>
                        </div>
                        <div class="settings_button">
                            <i class="fas fa-fw fa-cog"></i>
                        </div>
                    </div>
                </div>

                <div class="timer_menu">
                    <div class="timer_button">15</div>
                    <div class="timer_button active">30</div>
                    <div class="timer_button">60</div>
                    <div class="timer_button">120</div>
                </div>
                <div class="header_mobile_menu">
                    <div class="mobile_menu_button">
                        <i class="fas fa-bars"></i>
                    </div>
                </div>
            </div>
            <div class="center">
                <div class="mobile_timer_menu_wrapper" style="display: none; opacity: 1;">
                    <div class="mobile_timer_menu">
                        <span class="mobile_timer_title">timer</span>
                        <div class="mobile_timer_button">15</div>
                        <div class="mobile_timer_button active">30</div>
                        <div class="mobile_timer_button">60</div>
                        <div class="mobile_timer_button">120</div>
                    </div>
                </div>
                <div class="timer"></div>
                <div class="words">
                    <div class="caret"></div>
                    <div class="word">with</div>
                    <div class="word">also</div>
                    <div class="word">on</div>
                    <div class="word">child</div>
                    <div class="word">other</div>
                    <div class="word">thing</div>
                    <div class="word">general</div>
                    <div class="word">from</div>
                    <div class="word">need</div>
                    <div class="word">use</div>
                    <div class="word">begin</div>
                    <div class="word">just</div>
                    <div class="word">from</div>
                    <div class="word">down</div>
                    <div class="word">go</div>
                    <div class="word">with</div>
                    <div class="word">hand</div>
                    <div class="word">which</div>
                    <div class="word">same</div>
                    <div class="word">hold</div>
                    <div class="word">need</div>
                    <div class="word">on</div>
                    <div class="word">the</div>
                    <div class="word">little</div>
                    <div class="word">both</div>
                    <div class="word">tell</div>
                    <div class="word">another</div>
                    <div class="word">many</div>
                    <div class="word">much</div>
                    <div class="word">hand</div>
                    <div class="word">leave</div>
                    <div class="word">line</div>
                    <div class="word">before</div>
                    <div class="word">any</div>
                    <div class="word">who</div>
                    <div class="word">that</div>
                    <div class="word">late</div>
                    <div class="word">because</div>
                    <div class="word">alive</div>
                    <div class="word">crop</div>
                </div>
                <div class="keymap">
                    <div class="row r1">
                        <div></div>
                        <div class="keymap-key">q</div>
                        <div class="keymap-key">w</div>
                        <div class="keymap-key">e</div>
                        <div class="keymap-key">r</div>
                        <div class="keymap-key">t</div>
                        <div class="keymap-key">y</div>
                        <div class="keymap-key">u</div>
                        <div class="keymap-key">i</div>
                        <div class="keymap-key">o</div>
                        <div class="keymap-key">p</div>
                        <div class="keymap-key">[</div>
                        <div class="keymap-key">]</div>

                    </div>
                    <div class="row r2">
                        <div></div>
                        <div class="keymap-key">a</div>
                        <div class="keymap-key">s</div>
                        <div class="keymap-key">d</div>
                        <div class="keymap-key">f</div>
                        <div class="keymap-key">g</div>
                        <div class="keymap-key">h</div>
                        <div class="keymap-key">j</div>
                        <div class="keymap-key">k</div>
                        <div class="keymap-key">l</div>
                        <div class="keymap-key">;</div>
                        <div class="keymap-key">'</div>
                    </div>
                    <div class="row r3">
                        <div></div>
                        <div></div>
                        <div class="keymap-key">z</div>
                        <div class="keymap-key">x</div>
                        <div class="keymap-key">c</div>
                        <div class="keymap-key">v</div>
                        <div class="keymap-key">b</div>
                        <div class="keymap-key">n</div>
                        <div class="keymap-key">m</div>
                        <div class="keymap-key">,</div>
                        <div class="keymap-key">.</div>
                        <div class="keymap-key">/</div>
                    </div>
                    <div class="row r4">
                        <div></div>
                        <div class="keymap-key space"></div>
                    </div>
                </div>
            </div>
            <div class="footer">
                <div class="footer_text">
                    Press <span class="esc">esc</span> to restart the test.
                </div>
                <div class="links">
                    <div class="link">Contact</div>
                    <div class="link">Github</div>
                    <div class="link">Donate</div>
                </div>
            </div>
            <div class="settings" style="display: none;">
                <div class="themes">
                    <div class="themes_title">themes</div>
                    <!-- <div class=""></div> -->
                </div>
                <div class="register">
                    <div class="register_title">register</div>
                    <input placeholder="username">
                    <input placeholder="email">
                    <input placeholder="password">
                    <div class="register_button">
                        Sign Up
                    </div>
                </div>
                <div class="login">
                    <div class="login_title">
                        login
                    </div>
                    <input placeholder="login">
                    <input placeholder="password">
                    <div class="login_button">
                        Login
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    let themes = {
        'default': { 'main-color': '#2e1a47', 'sub-color': '#c18fff', 'sub-alt-color': '#27173c' },
        'dark': { 'main-color': '#221b44', 'sub-color': '#009eaf', 'sub-alt-color': '#191919' },
        '8008': { 'main-color': '#333a45', 'sub-color': '#f44c7f', 'sub-alt-color': '#2e343d' },
    };

    for (let [theme, color] of Object.entries(themes)) {
        let theme_element = document.createElement("div");
        theme_element.innerText = theme;
        theme_element.classList.add('theme');
        theme_element.style.color = color['sub-color'];
        theme_element.style.backgroundColor = color['sub-alt-color'];
        theme_element.addEventListener('click', theme_button_handler);
        document.querySelector('.themes').appendChild(theme_element);
    }

    function theme_button_handler() {
        set_style_sheet(event.target.innerText);
    }

    let update_timer = (() => {
        let timer_value = document.getElementsByClassName('timer_button active')[0].textContent;
        document.querySelector('.timer').textContent = timer_value;
    });

    update_timer();

    function btn_handler() {
        document.getElementsByClassName('timer_button active')[0].classList.toggle('active');
        event.target.classList.toggle('active');
        update_timer();
    }

    function kb_btn_handler() {
        let keymap_element = document.querySelector('.keymap');

        if (keymap_element.style.visibility !== 'hidden') {
            keymap_element.style.visibility = 'hidden';
        } else {
            keymap_element.style.visibility = '';
        }
    }

    for (let element of document.getElementsByClassName('timer_button')) {
        element.addEventListener('click', btn_handler);
    }

    document.querySelector('.kb_button').addEventListener('click', kb_btn_handler);

    function set_style_sheet(filename) {
        document.getElementById("theme").setAttribute('href', './themes/' + filename + '.css');
    }

    document.querySelector('.settings_button').addEventListener('click', settings_button_handler);

    function settings_button_handler() {
        let settings = document.querySelector('.settings');
        console.log(settings.style.display);
        if (settings.style.display !== 'none') {
            settings.style.display = 'none';
            document.querySelector('.center').style.display = '';
            document.querySelector('.footer').style.display = '';
            document.querySelector('.timer_menu').style.display = '';
        } else {
            settings.style.display = '';
            document.querySelector('.center').style.display = 'none';
            document.querySelector('.footer').style.display = 'none';
            document.querySelector('.timer_menu').style.display = 'none';
        }
    }

    document.querySelector('.header_mobile_menu').addEventListener('click', mobile_menu_handler);

    function mobile_menu_handler() {
        let timer_menu = document.querySelector('.mobile_timer_menu_wrapper');

        if (timer_menu.style.display !== 'none') {
            timer_menu.style.display = 'none'
        } else {
            timer_menu.style.display = ''
        }
    }

    document.addEventListener('click', function (event) {
        // let timer_menu = document.querySelector('.mobile_timer_menu');
        let timer_menu_wrapper = document.querySelector('.mobile_timer_menu_wrapper');
        if(event.target === timer_menu_wrapper) {
            mobile_menu_handler();
        }
        // console.log(event.target)
        // if(!timer_menu.contains(event.target)) {
        //     mobile_menu_handler();
        // }
        // if (timer_menu.contains(event.target) && timer_menu_wrapper.style.display !== 'none') {
        //     timer_menu_wrapper.style.display = ''
        // }
    });


</script>


</html>